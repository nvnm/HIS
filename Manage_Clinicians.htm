<!DOCTYPE html>
<!-- saved from url=(0030)https://demo.vitalone.io/users -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
				<!--<base href="/">--><base href="."> 		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="icon" href="https://demo.vitalone.io/s/img/favicon.png">

		<title>VitalOne</title>

				<link href="./index_files/bootstrap.min.css" rel="stylesheet">


				<!--[if lt IE 9]>
		<script src="/s/libs/html5shiv-3.7.2.min.js"></script>
		<script src="/s/libs/respond-1.4.2.min.js"></script>
		<![endif]-->

				<link rel="stylesheet" href="./index_files/font-awesome.min.css">

				<link rel="stylesheet" href="./index_files/animate.min.css">

				<link rel="stylesheet" href="./index_files/bootstrap-colorselector.css">

				<script type="text/javascript" async="" src="./index_files/recaptcha__en.js"></script><script src="./index_files/jquery-1.11.3.min.js"></script>

		<!-- jQuery UI 1.11.4 (required by jQuery File Upload 9.11.2) -->
		<script src="./index_files/jquery-ui.min.js"></script>

				<link href="./index_files/dataTables.bootstrap.min.css" rel="stylesheet">
		<link href="./index_files/dataTables.responsive.min.css" rel="stylesheet">
		<script src="./index_files/jquery.dataTables.min.js"></script>
		<script src="./index_files/dataTables.responsive.min.js"></script>
		<script src="./index_files/dataTables.bootstrap.min.js"></script>
		<script src="./index_files/datetime-moment.js"></script>
		<script src="./index_files/brackets-negative.js"></script>
		<script src="./index_files/dataTables.pageResize.min.js"></script>
		<script src="./index_files/enum.js"></script>

				<link href="./index_files/bootstrap-datepicker3.min.css" rel="stylesheet">
		<script src="./index_files/bootstrap-datepicker.min.js"></script>

				<script src="./index_files/handlebars-v4.0.5.js"></script>

				<script src="./index_files/h.min.js"></script>

				<script src="./index_files/bootstrap-notify.min.js"></script>


				<link href="./index_files/fullcalendar.min.css" rel="stylesheet">
		<link href="./index_files/scheduler.min.css" rel="stylesheet">
				<script src="./index_files/moment-2.20.1.min.js"></script>
		<script src="./index_files/fullcalendar.min.js"></script>
		<script src="./index_files/scheduler.min.js"></script>

				<link href="./index_files/bootstrap-datetimepicker-mod.min.css" rel="stylesheet">
		<script src="./index_files/bootstrap-datetimepicker-mod.min.js"></script>

				<script src="./index_files/bootbox.min.js"></script>


				<script src="./index_files/bootstrap.min.js"></script>

				<link href="./index_files/bootstrap-editable-mod.min.css" rel="stylesheet">
		<script src="./index_files/bootstrap-editable.min.js"></script>

				<script src="./index_files/inputmask.js"></script>
		<script src="./index_files/inputmask.date.extensions.js"></script>
		<script src="./index_files/inputmask.numeric.extensions.js"></script>
		<script src="./index_files/inputmask.date.formats.js"></script>

				<link href="./index_files/bootstrap-colorselector.css" rel="stylesheet">
		<script src="./index_files/bootstrap-colorselector.js"></script>

				<link href="./index_files/summernote.css" rel="stylesheet">
		<script src="./index_files/summernote.min.js"></script>
		<script src="./index_files/summernote-ext-myhelp.js"></script>


				<link rel="stylesheet" href="./index_files/literallycanvas.css">
				<script src="./index_files/literallycanvas-core.min.js"></script>

				<script src="./index_files/canvas-to-blob-3.6.0.min.js"></script>

				<script src="./index_files/html2canvas.min.js"></script>

				<link href="./index_files/bootstrap-multiselect.css" rel="stylesheet">
		<script src="./index_files/bootstrap-multiselect.js"></script>

				<link href="./index_files/select2.min.css" rel="stylesheet">
		<link href="./index_files/select2-bootstrap.min.css" rel="stylesheet">
		<script src="./index_files/select2.full.min.js"></script>

				<link href="./index_files/bootstrap-tagsinput.css" rel="stylesheet">
		<script src="./index_files/bootstrap-tagsinput.min.js"></script>

				<script src="./index_files/async.min.js"></script>

				<script src="./index_files/lodash.min.js"></script>

				<link href="./index_files/shepherd-theme-square.css" rel="stylesheet">
		<link href="./index_files/shepherd-theme-arrows.css" rel="stylesheet">
		<script src="./index_files/tether.js"></script>
		<script src="./index_files/shepherd.min.js"></script>

				<link href="./index_files/jquery.scrolling-tabs.min.css" rel="stylesheet">
		<script src="./index_files/jquery.scrolling-tabs.min.js"></script>

				<script src="./index_files/cmpl-forms.js"></script>

				<link href="./index_files/scms.css" rel="stylesheet">

		<style>
			.navbar {
				background-color: #3498DB!important;
				border-color: #1a4c6d!important;
				color: #FFFFFF!important;
			}

			.navbar .navbar-nav > .active > a,
			.navbar .navbar-nav > .open > a,
			.navbar .navbar-nav > .open > a:hover,
			.navbar .navbar-nav > .open > a:focus {
				color: #FFFFFF!important;
				background-color: #1a4c6d!important;
			}

			.navbar .navbar-nav > li > a {
				color: #FFFFFF!important;
			}

			.navbar-nav > .active > a, .vitalone-navbar .navbar-nav > .active > a:hover, .vitalone-navbar .navbar-nav > .active > a:focus {
				background-color: #1a4c6d!important;
			}

			.navbar-nav > li > a:hover, .vitalone-navbar .navbar-nav > li > a:focus {
				background-color: #1a4c6d!important;
			}
		</style>

				<script type="text/javascript">
			var ctxPath = ''; 			var scmsCtxPath = '';
			var scmsLoginURI = '\/';
			var scmsDataTableDateFormat = 'DD MMM YY HH:mm';
			var scmsPollInterval = '300000';
			var scmsQueueInterval = '300000';
			var scmsReminderLength = '60';
		</script>

					<script type="text/javascript" src="./index_files/scms-ng.js"></script>
			</head>

	<body>

    <nav class="navbar navbar-default navbar-fixed-top animated vitalone-navbar">
       <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
             <div id="navbar-brand" class="navbar-brand vitalone-brand-font"></div>
          </div>
          <div id="navbar" class="collapse navbar-collapse tour-container">
             <ul class="nav navbar-nav navbar-left tour-hideable">
                <li>
                   <a href="https://demo.vitalone.io/patients">Patients</a>
                </li>
                <li>
                   <a href="https://demo.vitalone.io/schedules">Cryo Master</a>
                </li>
             </ul>
             <ul class="nav navbar-nav navbar-right tour-hideable">
                <li class="dropdown active">
                   <a href="https://demo.vitalone.io/#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i>&nbsp;<span class="caret"></span></a>
                   <ul class="dropdown-menu" role="menu">
                      <li><a href="https://demo.vitalone.io/roles">Manage Roles</a></li>
                      <li><a href="https://demo.vitalone.io/users">Manage Users</a></li>
                      <li class="divider"></li>
                      <li><a href="https://demo.vitalone.io/users">Manage Clinicians</a></li>
                      <li><a href="https://demo.vitalone.io/users">Manage Tanks</a></li>
                   </ul>
                </li>
             </ul>
          </div>
       </div>
    </nav>
<!-- Modal -->
<div class="modal fade" id="obsCalculator">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">Ã—</span>
				</button>
				<h4 class="modal-title" id="obsLabel">Calculate OBS</h4>
			</div>
			<div class="modal-body">

				<form class="form-horizontal" id="obs">
					<div class="form-group">
						<label class="col-md-4">LMP</label>
						<div class="col-md-8">
							<div class="input-group date scms-datepicker">
								<input type="text" class="form-control input-sm datepicker" id="lmp" value="">
								<span class="input-group-addon" id="lmp2"><i class="glyphicon glyphicon-calendar"></i></span>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4">EDD</label>
						<div class="col-md-8">
							<div class="input-group date scms-datepicker">
								<input type="text" class="form-control input-sm datepicker" id="edd" value="">
								<span class="input-group-addon" id="edd2"><i class="glyphicon glyphicon-calendar"></i></span>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4">Date</label>
						<div class="col-md-8">
							<div class="input-group date scms-datepicker">
								<input type="text" class="form-control input-sm datepicker" id="date" value="23/08/18">
								<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
							</div>

						</div>
					</div>

					<div class="form-group" id="gesDate">
						<label class="col-md-4">Gestation</label>
						<div class="col-md-4">
							<div class="input-group">
								<input type="number" class="form-control" id="gestationWeeks" value="" min="0">
								<span class="input-group-addon">Weeks</span>
							</div>
						</div>
						<div class="col-md-4">
							<div class="input-group">
								<select id="gestationDays" class="form-control">
									<option value="0">0</option>
									<option value="1">1</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5</option>
									<option value="6">6</option>
								</select>
								<span class="input-group-addon">Days</span>
							</div>
						</div>
					</div>
				</form>

			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" id="resetAll">Reset All</button>
				<button type="button" class="btn btn-primary" id="calculateEddLmp">Calculate EDD and LMP</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="feedback">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">Ã—</span>
				</button>
				<h4 class="modal-title" id="feeback-label">Error Reporting</h4>
			</div>
			<div class="modal-body">
				<form id="fm-feedback" data-submit="0">
					<div class="form-group">
						<label>Comment</label>
						<textarea class="form-control" id="ta_feedback" name="feedback" rows="10"></textarea>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" id="feedback-cancel">Cancel</button>
				<button type="button" class="btn btn-primary" id="feedback-submit">Submit</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="passwordModal">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">
					<span>x</span>
				</button>
				<h4 class="modal-title">Change Password</h4>
			</div>
			<div class="modal-body">
				<form>
					<div class="form-group">
						<label for="oldPassword" class="control-label">Old Password *</label>
						<input type="password" class="form-control" name="oldPassword" id="oldPassword">
						<span class="error"></span>
					</div>
					<div class="form-group">
						<label for="newPassword" class="control-label">New Password *</label>
						<input type="password" class="form-control" name="newPassword" id="newPassword">
						<span class="help-block"><i class="fa fa-info-circle"></i>&nbsp;&nbsp;Minimum 8 characters (excluding spaces), no spaces allowed within the password.</span>
						<span class="error"></span>
					</div>
					<div class="form-group">
						<label for="confirmPassword" class="control-label">Confirm Password *</label>
						<input type="password" class="form-control" name="confirmPassword" id="confirmPassword">
						<span class="error"></span>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<span class="msg" style="margin-right:5px;"></span>
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary">Change Password</button>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	$('#obs').find('div.scms-datepicker')
			 .each(function() {
				 $(this).datepicker({
					 format: 'dd/mm/yy',
					 forceParse: true,
					 weekStart: 1,
					 todayBtn: 'linked',
					 autoclose: true,
					 orientation: 'top'
				 });
			 });

	$(function() {
		'use strict';
		var $edd = $('#edd');
		var $lmp = $('#lmp');
		var $gesDay = $('#gestationDays');
		var $gesWeek = $('#gestationWeeks');
		var $obsdate = $('#date');

		var $calculateBtn = $('#calculateEddLmp');
		$calculateBtn.removeClass( 'hidden' ).show();

		var $lmpIcon = $('#lmp2');
		var $eddIcon = $('#edd2');

		$('#lmp').on('change', function() {
			var lmp = moment($lmp.val(), 'DD/MM/YY');
			var edd = moment($lmp.val(), 'DD/MM/YY');
			var date = moment($obsdate.val(), 'DD/MM/YY');

			edd.add(40, 'w');
			edd = edd.format('DD/MM/YY');
			$edd.val(edd);

			var weekDiff = date.diff(lmp, 'weeks');
			var dayDiff = date.diff(lmp, 'days') - weekDiff * 7;
			$gesDay.val(dayDiff);
			$gesWeek.val(weekDiff);

			$(this).prop('disabled', true);
			$lmpIcon.addClass('hidden');
			$edd.prop('disabled', true);
			$eddIcon.addClass('hidden');

			if ($edd.val() && $lmp.val()) {
				$calculateBtn.hide();
			}
		});

		$('#edd').on('change', function() {
			var edd = moment($edd.val(), 'DD/MM/YY');
			var lmp = moment($edd.val(), 'DD/MM/YY');
			var date = moment($obsdate.val(), 'DD/MM/YY');

			lmp.subtract(40, 'w');

			var weekDiff = date.diff(lmp, 'weeks');
			var dayDiff = date.diff(lmp, 'days') - weekDiff * 7;
			$gesDay.val(dayDiff);
			$gesWeek.val(weekDiff);

			lmp = lmp.format('DD/MM/YY');
			$lmp.val(lmp);

			$(this).prop('disabled', true);
			$eddIcon.addClass('hidden');
			$lmp.prop('disabled', true);
			$lmpIcon.addClass('hidden');

			if ($edd.val() && $lmp.val()) {
				$calculateBtn.hide();
			}
		});

		$('#gesDate').on('change', function() {
			if ($edd.val()&& $lmp.val() && $gesDay.val() && $gesWeek.val()) {
				// get today's date
				var date = moment($obsdate.val(), 'DD/MM/YY');

				// subtract the gestation from today date to get lmp
				var lmp = moment($obsdate.val(), 'DD/MM/YY');
				lmp.subtract($gesWeek.val(), 'w');
				lmp.subtract($gesDay.val(), 'd');
				lmp = lmp.format('DD/MM/YY');

				// add 40 weeks to get edd
				var edd = moment(lmp, 'DD/MM/YY');
				edd.add(40, 'w');
				edd = edd.format('DD/MM/YY');

				// assign all values
				$lmp.val(lmp);
				$edd.val(edd);
			}
		});

		$('#date').on('change', function() {
			if ($edd.val()&& $lmp.val()) {
				var date = moment($obsdate.val(), 'DD/MM/YY');
				var lmp = moment($lmp.val(), 'DD/MM/YY');

				var weekDiff = date.diff(lmp, 'weeks');
				var dayDiff = date.diff(lmp, 'days') - weekDiff * 7;
				$gesDay.val(dayDiff);
				$gesWeek.val(weekDiff);
			}
		});

		$('#resetAll').on('click', function() {
			document.getElementById('obs').reset();
			$edd.prop('disabled', false);
			$lmp.prop('disabled', false);
			$eddIcon.removeClass('hidden');
			$lmpIcon.removeClass('hidden');
			$calculateBtn.show();
		});

		$('#calculateEddLmp').on('click', function() {
			if (!$edd.val() && !$lmp.val() && $gesDay.val() && $gesWeek.val()) {

				// get today's date
				var date = moment($obsdate.val(), 'DD/MM/YY');

				// subtract the gestation from today date to get lmp
				var lmp = moment($obsdate.val(), 'DD/MM/YY');
				lmp.subtract($gesWeek.val(), 'w');
				lmp.subtract($gesDay.val(), 'd');
				lmp = lmp.format('DD/MM/YY');

				// add 40 weeks to get edd
				var edd = moment(lmp, 'DD/MM/YY');
				edd.add(40, 'w');
				edd = edd.format('DD/MM/YY');

				//assign all values
				$lmp.val(lmp);
				$edd.val(edd);

				$calculateBtn.hide();

				$edd.prop('disabled', true);
				$lmp.prop('disabled', true);
				$eddIcon.addClass('hidden');
				$lmpIcon.addClass('hidden');
			}
			else {
				alert('Please enter at least 1 value');
			}
		});

		// Check TMX Notification
		var checkTmxNotification = function(status) {
			$.ajax({
				url: scmsCtxPath + '/tmx/notify/' + status,
				type: 'GET',
				success: function(data) {
					// Show and hide badge
					if (data.badge > 0) {
						var numberOfBadge = data.badge;
						$tmxBadge.html(numberOfBadge);
						$tmxBadge.removeClass('hidden');
					}
					else {
						$tmxBadge.addClass('hidden');
					}
				},
				error: function(err) {
					// Clear timer if not logged in
					if (err.status === 401) {
						clearInterval(tmxNotificationTimer);
					}
				}
			});
		}

		var callTmxNotification = function() {
					}

		// Set tmx badge
		var $tmxBadge = $('#tmx-badge');
		callTmxNotification();

		// Set interval for tmx notification
		var tmxNotificationTimer = setInterval(function() {
			callTmxNotification();
		}, scmsPollInterval);

		$('#reset-demo').on('click', function(e) {
			e.preventDefault();
			$(this).showConfirm({
				escapeToClose: true,
				title: 'Confirm Reset Data?',
				message: 'Please confirm to reset the database and center the appointments to today.',
				details: 'Click "Cancel" to return or "Confirm" to Reset.',
				confirmCallback: function() {

					// call ajax call to reset data
					$(this).showAlert({
						title: 'Data is resetting!',
						message: '<p>Data is resetting. The page will reload itself once done.</p>',
						details: ''
					});
					$(this).sendRequest({
						url: ctxPath + '/reset-database',
						type: 'POST'
					}, {
						200: function(data) { // 200 - success, no conflicting slot found, schedule added
							window.location.href = ctxPath + '/schedules';
						},
						400: function(data) {  // 409 - schedule conflict
							$(this).showAlert({
								title: 'Unable to Reset Data',
								message: '<p>An expected error occured while data is resetting. Please try again later.</p>',
								details: ''
							});
						}
					});

				}
			});
		});

		let passwordModal = $('#passwordModal'),
			passwordForm = passwordModal.find('.modal-body > form'),
			oldPassword = passwordForm.find('input[name="oldPassword"]'),
			newPassword = passwordForm.find('input[name="newPassword"]'),
			confirmPassword = passwordForm.find('input[name="confirmPassword"]'),
			msgSpan = passwordModal.find('.modal-footer > span.msg');

		$('#changePassword').on('click', function(e) {
			e.preventDefault();
			passwordModal.modal('show');
		});

		passwordModal.on('show.bs.modal', function(e) {

		}).on('hidden.bs.modal', function(e) {
			passwordForm.find('input').parent().removeClass('has-error');
			passwordForm.find('input').val('');
			passwordForm.find('input').siblings('span.error').html('');
			msgSpan.removeClass('text-danger text-success').html('');
		}).on('click', '.btn-primary', function(e) {
			e.preventDefault();
			passwordForm.find('input').parent().removeClass('has-error');
			passwordForm.find('input').siblings('span.help-block').show();
			passwordForm.find('input').siblings('span.error').html('');
			if (!oldPassword.val()) {
				oldPassword.parent().addClass('has-error');
				oldPassword.siblings('span.error')
						   .html('<i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;Old Password is required.');
			}
			if (!newPassword.val()) {
				newPassword.parent().addClass('has-error');
				newPassword.siblings('span.help-block').hide();
				newPassword.siblings().next('span.error')
						   .html('<i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;New Password is required.');
			}
			else if (/\S{8,50}/.test(newPassword.val()) === false) {
				newPassword.parent().addClass('has-error');
				newPassword.siblings('span.help-block').hide();
				newPassword.siblings().next('span.error')
						   .html('<i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;New Password must be between 8 to 50 characters.');
			}
			if (!confirmPassword.val() || newPassword.val() != confirmPassword.val()) {
				confirmPassword.parent().addClass('has-error');
				confirmPassword.siblings('span.error')
							   .html('<i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;Confirm Password does not match new password.');
			}

			if (!passwordForm.find('input').parent().hasClass('has-error')) {
				let formData = passwordForm.serializeArray();
				formData.push({
					name: 'id',
					value: 4
				});
				$(this).sendRequest({
					url: ctxPath + '/users/changePassword',
					data: formData,
					type: 'POST'
				}, {
					200: function(data) {
						passwordForm.find('input').val('');
						msgSpan.removeClass('text-danger').addClass('text-success')
							   .html('<i class="fa fa-check"></i>&nbsp;&nbsp;Password changed successfully.');
					},
					400: function(data) {
						if (data && data.hasOwnProperty('responseJSON') && data.responseJSON.length > 0) {
							$.each(data.responseJSON, function(i, e) {
								let label = passwordForm.find('label[for="' + e.k + '"]').text().replace(' *', '');
								let input = passwordForm.find('[name="' + e.k + '"]');
								input.parent().addClass('has-error');
								input.siblings('span.error')
									 .html('<i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;' + label + ' ' + e.v);
							});
						}
					}
				});
			}
		});
	});
</script>
<script src="./index_files/feedback.js"></script>

		<div class="container-fluid scrollpane">
  <div class="row">

    <div class="col-md-8">

	  <div class="row">
	    <div class="col-md-6">
	      <h3>Manage Clinicians</h3>
	    </div>
	  </div>

      <div id="panel-left" class="">
        <div class="panel-body">

                                        <div id="user-table_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                          <div class="row"><div class="col-sm-12"><table class="table table-condensed table-hover scms-data-table dataTable no-footer dtr-inline" id="user-table" role="grid" aria-describedby="user-table_info" style="width: 651px;">
          <thead>
            <tr role="row"><th class="sorting_desc" tabindex="0" aria-controls="user-table" rowspan="1" colspan="1" aria-label="Updated: activate to sort column ascending" aria-sort="descending" style="width: 163px;">Updated</th><th class="sorting" tabindex="0" aria-controls="user-table" rowspan="1" colspan="1" aria-label="Username: activate to sort column ascending" style="width: 115px;">Username</th><th class="sorting" tabindex="0" aria-controls="user-table" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 151px;">Name</th><th class="sorting_disabled" rowspan="1" colspan="1" aria-label="Mobile No." style="width: 122px;">Mobile No.</th></tr>
          </thead>
          <tbody>
          <tr id="DT_RowId-1" role="row" class="even"><td class="sorting_1">2017-10-31 08:53</td><td>Dr.James</td><td>James</td><td>-</td></tr><tr id="DT_RowId-2" role="row" class="odd"><td class="sorting_1">2017-10-31 08:53</td><td>Madeline</td><td>Madeline Zhong</td><td>95771238</td></tr><tr id="DT_RowId-3" role="row" class="even"><td class="sorting_1">2017-10-31 08:53</td><td>Jingxiang</td><td>Lim Jing Xiang</td><td>85617422</td></tr><tr id="DT_RowId-4" role="row" class="odd row-selected"><td class="sorting_1">2017-10-31 08:53</td><td>Dr.Jeremy</td><td>Jeremy Tay</td><td>97270123</td></tr><tr id="DT_RowId-5" role="row" class="even"><td class="sorting_1">2017-10-31 08:53</td><td>Dr.Thomas</td><td>Thomas Tan</td><td>-</td></tr><tr id="DT_RowId-6" role="row" class="odd"><td class="sorting_1">2017-10-31 08:53</td><td>Dr.Janice</td><td>Janice Kwok</td><td>-</td></tr></tbody>
          </table></div></div></div>

        </div>         </div>
    </div>
    <div class="col-md-4">

                        <h4><i class="fa fa-info-circle"></i> Information
          <small id="scms-loading" style="display: none;"><mark>&nbsp;<i class="fa fa-spinner fa-spin"></i> Loading...&nbsp;</mark></small></h4>
      <div>
        <p>Select a user on the left to view its details.</p>
        <p class="text-right">
           <button id="user-btn-refresh" type="button" class="btn btn-default btn-sm"><i class="fa fa-refresh"></i> Refresh</button>
           <button id="user-btn-add" type="button" class="btn btn-default btn-primary btn-sm"><i class="fa fa-plus"></i> Add Clinician</button>
        </p>
      </div>

      <div id="panel-right" class="panel panel-default" style="display: block;">
        <div class="panel-body">

                                        <div id="user-info" class="" style="display: none;"><table class="table table-striped table-condensed"><thead><tr><th colspan="2" class="strong">Details</th></tr></thead><tbody><tr><td class="col-md-4">Username</td><td class="col-md-8">Dr.Jeremy</td></tr><tr><td class="col-md-4">Name</td><td class="col-md-8">Jeremy Tay</td></tr><tr><td class="col-md-4">Mobile No.</td><td class="col-md-8">97270123</td></tr><tr><td class="col-md-4">Email</td><td class="col-md-8">cmpldev2@gmail.com</td></tr><tr><td class="col-md-4">Doctor</td><td class="col-md-8">No</td></tr><tr><td class="col-md-4">MCR No.</td><td class="col-md-8">MCR11123A</td></tr><tr><td class="col-md-4">Super Admin</td><td class="col-md-8">Yes</td></tr><tr><td class="col-md-4">Tasks Badge Preference</td><td class="col-md-8">Show if tasks haven't finished after reminder date</td></tr></tbody></table>Color<div style="width:20px; height:20px; border:1px solid #000000; background:#7B1FA2"></div><table class="table table-striped table-condensed"><thead><tr><th colspan="3" class="strong">Accessible Sites</th></tr></thead><tbody><tr><td><div style="width: 20px; height: 20px; border: 1px solid #000000; background: #3498DB"></div></td><td>80 Marine Parade Road</td><td>Doctor</td></tr><tr><td><div style="width: 20px; height: 20px; border: 1px solid #000000; background: #00796B"></div></td><td>80 Marine Parade Road</td><td>Doctor</td></tr></tbody></table><div class="text-right"><button id="user-btn-delete" type="button" class="btn btn-default btn-danger btn-sm"><i class="fa fa-trash"></i>&nbsp;Delete</button>&nbsp;<button id="user-btn-passwd" type="button" class="btn btn-default btn-sm"><i class="fa fa-lock"></i>&nbsp;Change Password</button>&nbsp;<button id="user-btn-edit" type="button" class="btn btn-default btn-primary btn-sm"><i class="fa fa-pencil"></i>&nbsp;Edit</button></div></div>
          <form id="user-form" class="" style="display: block;"><div data-type="hidden" class="form-group"><input type="hidden" name="id" value="4"></div><div data-type="readonlyText" class="form-group"><label for="inputUsername" class="control-label">Username *</label><input type="text" name="username" class="form-control" value="Dr.Jeremy" readonly=""></div><div data-type="textbox" class="form-group"><label for="inputName" class="control-label">Name *</label><input type="text" class="form-control" id="inputName" name="name" value="Jeremy Tay"></div><div data-type="textbox" class="form-group"><label for="inputMobileNo" class="control-label">Mobile No.</label><input type="text" class="form-control" id="inputMobileNo" name="mobileNo" value="97270123"><span id="help_inputMobileNo" class="help-block"><i class="fa fa-info-circle"></i>&nbsp;Must be a valid Singapore registered Mobile No.</span></div><div data-type="textbox" class="form-group"><label for="inputEmail" class="control-label">Email</label><input type="text" class="form-control" id="inputEmail" name="email" value="cmpldev2@gmail.com"></div><div data-type="singleCheckbox" class="form-group"><div><label><input type="checkbox" name="isDoctor" value="true">&nbsp;&nbsp;Doctor</label></div></div><div data-type="colorpicker" class="form-group"><label for="inputColor" class="control-label">Color</label><select name="color" class="form-control" id="inputColor" style="display: none;"><option value="#3498DB" data-color="#3498DB">#3498DB</option><option value="#D32F2F" data-color="#D32F2F">#D32F2F</option><option value="#C2185B" data-color="#C2185B">#C2185B</option><option value="#817aac" data-color="#817aac">#817aac</option><option value="#512DA8" data-color="#512DA8">#512DA8</option><option value="#303F9F" data-color="#303F9F">#303F9F</option><option value="#1976D2" data-color="#1976D2">#1976D2</option><option value="#0288D1" data-color="#0288D1">#0288D1</option><option value="#0097A7" data-color="#0097A7">#0097A7</option><option value="#00796B" data-color="#00796B">#00796B</option><option value="#388E3C" data-color="#388E3C">#388E3C</option><option value="#689F38" data-color="#689F38">#689F38</option><option value="#AFB42B" data-color="#AFB42B">#AFB42B</option><option value="#FBC02D" data-color="#FBC02D">#FBC02D</option><option value="#FFA000" data-color="#FFA000">#FFA000</option><option value="#F57C00" data-color="#F57C00">#F57C00</option><option value="#E64A19" data-color="#E64A19">#E64A19</option><option value="#5D4037" data-color="#5D4037">#5D4037</option><option value="#616161" data-color="#616161">#616161</option><option value="#333333" data-color="#333333">#333333</option></select><div class="dropdown dropdown-colorselector"><a data-toggle="dropdown" class="dropdown-toggle" href="https://demo.vitalone.io/#"><span class="btn-colorselector" style="background-color: rgb(52, 152, 219);"></span></a><ul class="dropdown-menu dropdown-caret"><li><a class="color-btn selected" href="https://demo.vitalone.io/#" data-color="#3498DB" data-value="#3498DB" title="#3498DB" style="background-color: rgb(52, 152, 219);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#D32F2F" data-value="#D32F2F" title="#D32F2F" style="background-color: rgb(211, 47, 47);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#C2185B" data-value="#C2185B" title="#C2185B" style="background-color: rgb(194, 24, 91);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#817aac" data-value="#817aac" title="#817aac" style="background-color: rgb(129, 122, 172);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#512DA8" data-value="#512DA8" title="#512DA8" style="background-color: rgb(81, 45, 168);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#303F9F" data-value="#303F9F" title="#303F9F" style="background-color: rgb(48, 63, 159);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#1976D2" data-value="#1976D2" title="#1976D2" style="background-color: rgb(25, 118, 210);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#0288D1" data-value="#0288D1" title="#0288D1" style="background-color: rgb(2, 136, 209);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#0097A7" data-value="#0097A7" title="#0097A7" style="background-color: rgb(0, 151, 167);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#00796B" data-value="#00796B" title="#00796B" style="background-color: rgb(0, 121, 107);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#388E3C" data-value="#388E3C" title="#388E3C" style="background-color: rgb(56, 142, 60);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#689F38" data-value="#689F38" title="#689F38" style="background-color: rgb(104, 159, 56);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#AFB42B" data-value="#AFB42B" title="#AFB42B" style="background-color: rgb(175, 180, 43);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#FBC02D" data-value="#FBC02D" title="#FBC02D" style="background-color: rgb(251, 192, 45);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#FFA000" data-value="#FFA000" title="#FFA000" style="background-color: rgb(255, 160, 0);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#F57C00" data-value="#F57C00" title="#F57C00" style="background-color: rgb(245, 124, 0);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#E64A19" data-value="#E64A19" title="#E64A19" style="background-color: rgb(230, 74, 25);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#5D4037" data-value="#5D4037" title="#5D4037" style="background-color: rgb(93, 64, 55);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#616161" data-value="#616161" title="#616161" style="background-color: rgb(97, 97, 97);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#333333" data-value="#333333" title="#333333" style="background-color: rgb(51, 51, 51);"></a></li></ul></div></div><div data-type="textbox" class="form-group"><label for="inputMcrNo" class="control-label">MCR No.</label><input type="text" class="form-control" id="inputMcrNo" name="mcrNo" value="MCR11123A"><span id="help_inputMcrNo" class="help-block"><i class="fa fa-info-circle"></i>&nbsp;Required for Doctor, remove otherwise</span></div><div data-type="select" class="form-group"><label for="inputBadgeRule" class="control-label">Badge Preference</label><select name="badgeRule" class="form-control" id="inputBadgeRule"><option value="1" selected="">Show if tasks haven't finished after reminder date</option><option value="2">Show if have overdue tasks</option></select></div><div data-type="buttonGroup" class="form-group"><div><label for="inputSuperAdmin" class="control-label">Super Admin</label></div><div class="btn-group" role="group"><button type="button" class="btn btn-default btn-primary" value="Yes">Yes</button><button type="button" class="btn btn-default" value="No">No</button></div><input type="hidden" data-type="value" name="superAdmin" value="Yes"></div><br><div class="form-group"><label><strong>Accessible Sites</strong></label><div><div data-type="select" class="form-group"><select class="form-control schColor" name="color_1" style="display: none;"><option value="#3498DB" data-color="#3498DB" selected="">#3498DB</option><option value="#D32F2F" data-color="#D32F2F">#D32F2F</option><option value="#C2185B" data-color="#C2185B">#C2185B</option><option value="#817aac" data-color="#817aac">#817aac</option><option value="#512DA8" data-color="#512DA8">#512DA8</option><option value="#303F9F" data-color="#303F9F">#303F9F</option><option value="#1976D2" data-color="#1976D2">#1976D2</option><option value="#0288D1" data-color="#0288D1">#0288D1</option><option value="#0097A7" data-color="#0097A7">#0097A7</option><option value="#00796B" data-color="#00796B">#00796B</option><option value="#388E3C" data-color="#388E3C">#388E3C</option><option value="#689F38" data-color="#689F38">#689F38</option><option value="#AFB42B" data-color="#AFB42B">#AFB42B</option><option value="#FBC02D" data-color="#FBC02D">#FBC02D</option><option value="#FFA000" data-color="#FFA000">#FFA000</option><option value="#F57C00" data-color="#F57C00">#F57C00</option><option value="#E64A19" data-color="#E64A19">#E64A19</option><option value="#5D4037" data-color="#5D4037">#5D4037</option><option value="#616161" data-color="#616161">#616161</option><option value="#333333" data-color="#333333">#333333</option></select><div class="dropdown dropdown-colorselector" style="display: inline;"><a data-toggle="dropdown" class="dropdown-toggle" href="https://demo.vitalone.io/#"><span class="btn-colorselector" style="background-color: rgb(52, 152, 219);"></span></a><ul class="dropdown-menu dropdown-caret"><li><a class="color-btn selected" href="https://demo.vitalone.io/#" data-color="#3498DB" data-value="#3498DB" title="#3498DB" style="background-color: rgb(52, 152, 219);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#D32F2F" data-value="#D32F2F" title="#D32F2F" style="background-color: rgb(211, 47, 47);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#C2185B" data-value="#C2185B" title="#C2185B" style="background-color: rgb(194, 24, 91);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#817aac" data-value="#817aac" title="#817aac" style="background-color: rgb(129, 122, 172);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#512DA8" data-value="#512DA8" title="#512DA8" style="background-color: rgb(81, 45, 168);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#303F9F" data-value="#303F9F" title="#303F9F" style="background-color: rgb(48, 63, 159);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#1976D2" data-value="#1976D2" title="#1976D2" style="background-color: rgb(25, 118, 210);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#0288D1" data-value="#0288D1" title="#0288D1" style="background-color: rgb(2, 136, 209);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#0097A7" data-value="#0097A7" title="#0097A7" style="background-color: rgb(0, 151, 167);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#00796B" data-value="#00796B" title="#00796B" style="background-color: rgb(0, 121, 107);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#388E3C" data-value="#388E3C" title="#388E3C" style="background-color: rgb(56, 142, 60);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#689F38" data-value="#689F38" title="#689F38" style="background-color: rgb(104, 159, 56);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#AFB42B" data-value="#AFB42B" title="#AFB42B" style="background-color: rgb(175, 180, 43);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#FBC02D" data-value="#FBC02D" title="#FBC02D" style="background-color: rgb(251, 192, 45);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#FFA000" data-value="#FFA000" title="#FFA000" style="background-color: rgb(255, 160, 0);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#F57C00" data-value="#F57C00" title="#F57C00" style="background-color: rgb(245, 124, 0);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#E64A19" data-value="#E64A19" title="#E64A19" style="background-color: rgb(230, 74, 25);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#5D4037" data-value="#5D4037" title="#5D4037" style="background-color: rgb(93, 64, 55);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#616161" data-value="#616161" title="#616161" style="background-color: rgb(97, 97, 97);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#333333" data-value="#333333" title="#333333" style="background-color: rgb(51, 51, 51);"></a></li></ul></div><label class="control-label">&nbsp;&nbsp;80 Marine Parade Road</label><select class="form-control" name="site_1"><option value="0">No roles assigned</option><option value="4">Accountant</option><option value="3">ClinicAssistant</option><option value="2">ClinicManager</option><option value="1" selected="">Doctor</option><option value="5">Doctor O&amp;G</option></select></div><div data-type="select" class="form-group"><select class="form-control schColor" name="color_2" style="display: none;"><option value="#3498DB" data-color="#3498DB">#3498DB</option><option value="#D32F2F" data-color="#D32F2F">#D32F2F</option><option value="#C2185B" data-color="#C2185B">#C2185B</option><option value="#817aac" data-color="#817aac">#817aac</option><option value="#512DA8" data-color="#512DA8">#512DA8</option><option value="#303F9F" data-color="#303F9F">#303F9F</option><option value="#1976D2" data-color="#1976D2">#1976D2</option><option value="#0288D1" data-color="#0288D1">#0288D1</option><option value="#0097A7" data-color="#0097A7">#0097A7</option><option value="#00796B" data-color="#00796B" selected="">#00796B</option><option value="#388E3C" data-color="#388E3C">#388E3C</option><option value="#689F38" data-color="#689F38">#689F38</option><option value="#AFB42B" data-color="#AFB42B">#AFB42B</option><option value="#FBC02D" data-color="#FBC02D">#FBC02D</option><option value="#FFA000" data-color="#FFA000">#FFA000</option><option value="#F57C00" data-color="#F57C00">#F57C00</option><option value="#E64A19" data-color="#E64A19">#E64A19</option><option value="#5D4037" data-color="#5D4037">#5D4037</option><option value="#616161" data-color="#616161">#616161</option><option value="#333333" data-color="#333333">#333333</option></select><div class="dropdown dropdown-colorselector" style="display: inline;"><a data-toggle="dropdown" class="dropdown-toggle" href="https://demo.vitalone.io/#"><span class="btn-colorselector" style="background-color: rgb(0, 121, 107);"></span></a><ul class="dropdown-menu dropdown-caret"><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#3498DB" data-value="#3498DB" title="#3498DB" style="background-color: rgb(52, 152, 219);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#D32F2F" data-value="#D32F2F" title="#D32F2F" style="background-color: rgb(211, 47, 47);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#C2185B" data-value="#C2185B" title="#C2185B" style="background-color: rgb(194, 24, 91);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#817aac" data-value="#817aac" title="#817aac" style="background-color: rgb(129, 122, 172);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#512DA8" data-value="#512DA8" title="#512DA8" style="background-color: rgb(81, 45, 168);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#303F9F" data-value="#303F9F" title="#303F9F" style="background-color: rgb(48, 63, 159);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#1976D2" data-value="#1976D2" title="#1976D2" style="background-color: rgb(25, 118, 210);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#0288D1" data-value="#0288D1" title="#0288D1" style="background-color: rgb(2, 136, 209);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#0097A7" data-value="#0097A7" title="#0097A7" style="background-color: rgb(0, 151, 167);"></a></li><li><a class="color-btn selected" href="https://demo.vitalone.io/#" data-color="#00796B" data-value="#00796B" title="#00796B" style="background-color: rgb(0, 121, 107);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#388E3C" data-value="#388E3C" title="#388E3C" style="background-color: rgb(56, 142, 60);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#689F38" data-value="#689F38" title="#689F38" style="background-color: rgb(104, 159, 56);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#AFB42B" data-value="#AFB42B" title="#AFB42B" style="background-color: rgb(175, 180, 43);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#FBC02D" data-value="#FBC02D" title="#FBC02D" style="background-color: rgb(251, 192, 45);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#FFA000" data-value="#FFA000" title="#FFA000" style="background-color: rgb(255, 160, 0);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#F57C00" data-value="#F57C00" title="#F57C00" style="background-color: rgb(245, 124, 0);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#E64A19" data-value="#E64A19" title="#E64A19" style="background-color: rgb(230, 74, 25);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#5D4037" data-value="#5D4037" title="#5D4037" style="background-color: rgb(93, 64, 55);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#616161" data-value="#616161" title="#616161" style="background-color: rgb(97, 97, 97);"></a></li><li><a class="color-btn" href="https://demo.vitalone.io/#" data-color="#333333" data-value="#333333" title="#333333" style="background-color: rgb(51, 51, 51);"></a></li></ul></div><label class="control-label">&nbsp;&nbsp;80 Marine Parade Road</label><select class="form-control" name="site_2"><option value="0">No roles assigned</option><option value="4">Accountant</option><option value="3">ClinicAssistant</option><option value="2">ClinicManager</option><option value="1" selected="">Doctor</option><option value="5">Doctor O&amp;G</option></select></div></div></div><div class="form-group text-right" data-type="buttons-action"><button type="button" name="btn_cancel" class="btn btn-default btn-sm">Cancel</button> <button type="button" name="btn_submit" class="btn btn-primary btn-sm">Update</button> </div></form>

        </div>         </div>
    </div>
  </div>           <script type="text/javascript">
    var scmsLblNoRecordsFound   = 'No records found';
    var scmsLblNoRecordsMatched = 'No matching records found';

    var scmsDtTblSetting  =  JSON.parse("{\"paging\": true,\"pageLength\": 33,\"lengthMenu\": [10,33,50,100],\"responsive\": true,\"cache\": false}") ;
    var doctorLabel = 'Doctor';
    var mcrNoLabel = 'MCR No.';
    var mcrNoHelpText = 'Required for Doctor, remove otherwise';

    var hasAccess = true;

    var scmsSites = [
            {
      	id: '1',
        name: '',
        addr: '80 Marine Parade Road',
        color: '#3498DB'
      },            {
      	id: '2',
        name: '',
        addr: '80 Marine Parade Road',
        color: '#00796B'
      }          ];

    var scmsRoles = [
            {
      	id: "4",
        name: "Accountant"
      },            {
      	id: "3",
        name: "ClinicAssistant"
      },            {
      	id: "2",
        name: "ClinicManager"
      },            {
      	id: "1",
        name: "Doctor"
      },            {
      	id: "5",
        name: "Doctor O&G"
      }          ];

    var scmsColors = [
            {
      	value: "#3498DB",
        label: "#3498DB"
      },            {
      	value: "#D32F2F",
        label: "#D32F2F"
      },            {
      	value: "#C2185B",
        label: "#C2185B"
      },            {
      	value: "#817aac",
        label: "#817aac"
      },            {
      	value: "#512DA8",
        label: "#512DA8"
      },            {
      	value: "#303F9F",
        label: "#303F9F"
      },            {
      	value: "#1976D2",
        label: "#1976D2"
      },            {
      	value: "#0288D1",
        label: "#0288D1"
      },            {
      	value: "#0097A7",
        label: "#0097A7"
      },            {
      	value: "#00796B",
        label: "#00796B"
      },            {
      	value: "#388E3C",
        label: "#388E3C"
      },            {
      	value: "#689F38",
        label: "#689F38"
      },            {
      	value: "#AFB42B",
        label: "#AFB42B"
      },            {
      	value: "#FBC02D",
        label: "#FBC02D"
      },            {
      	value: "#FFA000",
        label: "#FFA000"
      },            {
      	value: "#F57C00",
        label: "#F57C00"
      },            {
      	value: "#E64A19",
        label: "#E64A19"
      },            {
      	value: "#5D4037",
        label: "#5D4037"
      },            {
      	value: "#616161",
        label: "#616161"
      },            {
      	value: "#333333",
        label: "#333333"
      }          ];
  </script>
      <script>'use strict';
$(function() {

	/////////////////////////
	// Variable Definitions //
	/////////////////////////

	var $loadingIndicator = $('#scms-loading');
	var $rightPanel = $('#panel-right');
	var $infoDiv = $('#user-info');
	var $formDiv = $('#user-form');
	var $btnAdd = $('#user-btn-add');
	var $btnRefresh = $('#user-btn-refresh');

	var dataTableID = '#user-table';
	var ajaxURLPrefix = scmsCtxPath + '/users';
	var dataTableNoResults = false;
	var dataTableSelectedId;

	// *** Init the show/hide state of the elements within the right panel.
	$infoDiv.removeClass('hidden').hide();
	$formDiv.removeClass('hidden').hide();
	$rightPanel.removeClass('hidden').hide();

	////////////////
	// DataTables //
	////////////////

	if (hasAccess) {
		$.fn.dataTable.ext.errMode = 'none';

		let $userDtTableSetting = {
			ajax: ajaxURLPrefix + '/list',
			cache: false,
			responsive: true,
			paging: false,
			language: {
				emptyTable: scmsLblNoRecordsFound,
				zeroRecords: scmsLblNoRecordsMatched
			},
			columns: [
				{ data: 'updated' },
				{ data: 'username' },
				{ data: 'name' },
				{ data: 'mobileNo' }
			],
			order: [[0, 'desc']],
			columnDefs: [{
				targets: [3],
				orderable: false
			}, {
				targets: [0],
				searchable: false
			}]
		};

		var $dataTable = $(dataTableID).DataTable(
			$.extend($userDtTableSetting, scmsDtTblSetting)
		).on('init.dt', function() {
			dataTableInitCallback();
		}).on('draw.dt', function() {
			clickFirstDataTableRow($(this).find('tbody'));
		}).on('error.dt', function(e, settings, techNote, message) {
			$(this).showAlert({
				title: 'Error',
				message: 'An error has occurred, please try again later.',
				details: message
			});
		});
	}

	////////////////////
	// Refresh Button //
	////////////////////
	$btnRefresh.on('click', function() {
		var formDivIsVisible = $formDiv.is(':visible');
		if (!formDivIsVisible) {
			location.reload(true);
		}
		else {
			$(this).showConfirm({
				escapeToClose: true,
				title: 'Confirm Refresh?',
				message: 'A data entry form is currently active.<br/>You may have unsaved changes that will be lost after refresh.',
				details: 'Click "Cancel" to return to your data entry or "Confirm" to refresh.',
				confirmCallback: function() {
					location.reload(true);
				}
			});
		}
	});

	var onChangeSuper = function() {
		$('input[name=superAdmin]').change(function() {
			if ($(this).val() === 'Yes') {
				$('[id^=site]').prop('checked', true).prop('disabled', true);
			}
			else {
				$('[id^=site]').prop('disabled', false);
			}
		});
	};

	////////////////
	// Add Button //
	////////////////
	$btnAdd.on('click', function() {
		$formDiv.buildForm({
			options: buildFormOptions,
			inputs: buildFormInputsAdd,
			buttons: buildFormButtonsAdd
		}).show().siblings().hide();

		$formDiv.find('select[name="color"]').colorselector();

		$formDiv.find('.form-group:nth-last-of-type(2)').after(getSiteForm());
		$('select.schColor').colorselector();
		$('select.schColor').next('.dropdown-colorselector').css('display', 'inline');

		// This is to workaround a Chrome issue where a short delay is needed in order for the focus() to work.
		setTimeout(function() {
			$formDiv.find('input[type=text]:enabled:not([readonly])').first().focus();
			onChangeSuper();
		}, 100);
		$(this).prop('disabled', true);
		$rightPanel.show();
	});


	// ///////////////////
	// // Cancel Button //
	// ///////////////////
	// $btnCancel.on( 'click', function() {
	//     $infoDiv.show().siblings().hide();
	// });

	//////////////////////////////////
	// Init callback for Data Table //
	//////////////////////////////////
	var dataTableInitCallback = function() {

		// ***
		// *** Filter input
		// ***
		var $filter = $(dataTableID + '_filter label');
		$filter.contents()
			   .filter(function() {
				   return this.nodeType === 3; // textNode. See: https://developer.mozilla.org/docs/en/DOM/Node.nodeType
			   }).remove();
		let $label = $('<label>').text('Search:');
		$filter.find( 'input[type="search"]' ).wrap($label);
		$filter.find('input[type="search"]').attr('placeholder', '').focus();

		// ***
		// *** Table rows click handler
		// ***
		var $dataTableTbody = $(dataTableID).find('tbody');
		$dataTableTbody.on('click', 'tr', function() {

			var $this = $(this);

			// No need to continue if no results.
			if (dataTableNoResults) {
				$infoDiv.hide();
				return;
			}

			var rowID = $this.attr('id');
			var recID = rowID.substring(rowID.lastIndexOf('-') + 1);
			$dataTable.$('tr.row-selected').removeClass('row-selected');
			$this.addClass('row-selected');

			if (dataTableSelectedId !== recID) {
				dataTableSelectedId = recID;
				showRecordDetails($this, recID);
				$btnAdd.prop('disabled', false);
			}
		});

		clickFirstDataTableRow($dataTableTbody);
	};

	// ***
	// *** Click the first row if there are results.
	// ***
	var clickFirstDataTableRow = function($dataTableTbody) {
		dataTableNoResults = $dataTableTbody.find('td').first().hasClass('dataTables_empty');
		if (dataTableNoResults) {
			$rightPanel.hide();
			$btnAdd.prop('disabled', false);
			$loadingIndicator.hide();
		}
		else {
			$dataTableTbody.find('tr').first().click(); // *** Select the first row.
		}
	};

	/////////////////////////////
	// Display record details. //
	/////////////////////////////
	var showRecordDetails = function($elem, recID) {
		$elem.sendRequest({
			url: ajaxURLPrefix + '/find/' + recID,
			type: 'GET',
			loadingIndicator: $loadingIndicator
		}, {
			200: function(data) {
				showInfoDiv(data);
				$rightPanel.show();
			},
			204: function() {
				showRecordNotFound($(this), recID);
			}
		});
	};

	///////////////////////////////
	// Display record not found. //
	///////////////////////////////
	var showRecordNotFound = function($elem, recID) {
		var recordID = ScmsUtils.isBlankString(recID) ? recID : '?';
		$elem.showAlert({
			title: 'Not Found',
			message: 'The requested record cannot be found.',
			details: 'The record ID being requested for is [' + recordID + '].'
		});
	};

	// Add site, role, and colorpicker
	var getSiteForm = function(data) {
		var siteForm = '<br><div class="form-group"><label><strong>Accessible Sites</strong></label><div>';
		$.each(scmsSites, function(idx, site) {
			var index = site.id;
			siteForm += '<div data-type="select" class="form-group">';

			siteForm += '<select class="form-control schColor" name="color_' + site.id + '">';
			var selectedColor = '';
			if (data && data.sites && data.sites[site.id]) {
				selectedColor = data.sites[index].color;
			}
			else {
				// get selected color from site
				selectedColor = site.color;
			}
			$.each(scmsColors, function(index, color) {
				var selected = (selectedColor === color.value) ? 'selected' : '';
				siteForm += '<option value="' + color.value + '" data-color="' + color.value + '" ' + selected + '>' + color.label + '</option>';
			});
			siteForm += '</select>';

			siteForm += '<label class="control-label">&nbsp;&nbsp;' + site.addr + '</label>';

			siteForm += (
				'<select class="form-control" name="site_' + site.id + '">' +
					'<option value="0">No roles assigned</option>'
			);

			var selectedRole = (data && data.sites && data.sites[index]) ? data.sites[index].role.id : '';
			$.each(scmsRoles, function(index, role) {
				var selected = (selectedRole === role.id) ? 'selected' : '';
				siteForm += '<option value="' + role.id + '" ' + selected + '>' + ScmsUtils.escapeHTML(role.name) + '</option>';
			});
			siteForm += '</select></div>';
		});
		return siteForm;
	}

	/////////////////////////////////////////////
	// Create HTML for $infoDiv and display it //
	/////////////////////////////////////////////
	var showInfoDiv = function(data) {

		// *** Label-to-dataRow mappings.
		var rows = {};
		rows['Username'] = data.username;
		rows['Name'] = data.name;
		rows['Mobile No.'] = data.mobileNo;
		rows['Email'] = data.email;
			//'GC Email'   : data.gcEmail,
			//'Role'       : data.role.replace(/([A-Z])/g, ' $1'), // insert a space before all caps
		rows[doctorLabel] = data.isDoctor === 'true' ? 'Yes' : 'No';
		rows[mcrNoLabel] = data.mcrNo;
		rows['Super Admin'] = data.superAdmin;

		// *** HTML for $infoDiv.
		var html = (
			'<table class="table table-striped table-condensed">' +
				'<thead>' +
					'<th colspan="2" class="strong">Details</th>' +
				'</thead>' +
				'<tbody>'
		);

		$.each(rows, function(key, val) {
			html += (
				'<tr>' +
					'<td class="col-md-4">' + ScmsUtils.escapeHTML(key) + '</td>' +
					'<td class="col-md-8">' + ScmsUtils.escapeHTML(val, '-').replace(/\n/g, '<br>') + '</td>' +
				'</tr>'
			);
		});

		// Show task badge preference
		var badgePreference = '';
		switch (data.badgeRule) {
			case '1':
				badgePreference = 'Show if tasks haven\'t finished after reminder date';
				break;

			case '2':
				badgePreference = 'Show if have overdue tasks';
				break;

			default:
				badgePreference = '-';
				break;
		}

		html += (
					'<tr>' +
						'<td class="col-md-4">Tasks Badge Preference</td>' +
						'<td class="col-md-8">' + ScmsUtils.escapeHTML(badgePreference) + '</td>' +
					'</tr>' +
				'</tbody>' +
			'</table>'
		);

		// *** Color
    html += (
      '<tr>' +
        '<td class="col-md-4">Color</td>' +
        '<td class="col-md-8">' +
          '<div style="width:20px; height:20px; border:1px solid #000000; background:' + data.color + '"></div>' +
        '</td>' +
      '</tr>'
    );

		html += '</tbody></table>';

		// List of accessible sites
		html += (
			'<table class="table table-striped table-condensed">' +
				'<thead>' +
					'<th colspan="3" class="strong">Accessible Sites</th>' +
				'</thead>' +
				'<tbody>'
		);

		if (data.sites.length == 0) {
			html += (
				'<tr>' +
					'<td colspan="3">No records found.</td>' +
				'</tr>'
			);
		}

		$.each(data.sites, function(key, val) {
			html += (
				'<tr>' +
					'<td><div style="width: 20px; height: 20px; border: 1px solid #000000; background: ' + val.color + '"></div></td>' +
					'<td>' + ScmsUtils.escapeHTML(val.site.addr) + '</td>' + '<td>' + ScmsUtils.escapeHTML(val.role.name) + '</td>' +
				'</tr>'
			);
		});

		html += (
				'</tbody>' +
			'</table>' +
			'<div class="text-right">'
		);

		var btns = [];

		if (data['protected'] !== 'true') {
			btns.push('<button id="user-btn-delete" type="button" class="btn btn-default btn-danger btn-sm"><i class="fa fa-trash"></i>&nbsp;Delete</button>');
		}
		btns.push('<button id="user-btn-passwd" type="button" class="btn btn-default btn-sm"><i class="fa fa-lock"></i>&nbsp;Change Password</button>');
		btns.push('<button id="user-btn-edit" type="button" class="btn btn-default btn-primary btn-sm"><i class="fa fa-pencil"></i>&nbsp;Edit</button>');

		html += btns.join('&nbsp;') + '</div>';

		$infoDiv.html(html).show().siblings().hide();

		// *** Click handler for delete button.
		$('#user-btn-delete').on('click', function() {
			confirmDelete(data);
		});

		// *** Click handler for passwd button.
		$('#user-btn-passwd').on('click', function() {
			$formDiv.buildForm({
				options: buildFormOptions,
				inputs: buildFormInputsPasswd,
				buttons: buildFormButtonsPasswd,
				data: data
			}).show().siblings().hide();

			// This is to workaround a Chrome issue where a short delay is needed in order for the focus() to work.
			setTimeout(function() {
				$formDiv.find('input[type=password]:enabled:not([readonly])').first().focus();
			}, 100);
		});

		// // *** Click handler for restock button.
		// $( '#user-btn-restock' ).on( 'click', function() {
		//     $formDiv.buildForm({
		//         options: buildFormOptions,
		//         inputs:  buildFormInputsRestock,
		//         buttons: buildFormButtonsRestock,
		//         data: data
		//     }).show().siblings().hide();
		// });

		// *** Click handler for edit button.
		$('#user-btn-edit').on('click', function() {
			$formDiv.buildForm({
				options: buildFormOptions,
				inputs: buildFormInputsEdit,
				buttons: buildFormButtonsEdit,
				data: data
			}).show().siblings().hide();

			$formDiv.find('select[name="color"]').colorselector();

			$formDiv.find('.form-group:nth-last-of-type(2)').after(getSiteForm(data));
			$('select.schColor').colorselector();
			$('select.schColor').next('.dropdown-colorselector').css('display', 'inline');

			// This is to workaround a Chrome issue where a short delay is needed in order for the focus() to work.
			setTimeout(function() {
				$formDiv.find('input[type=text]:enabled:not([readonly])').first().focus();
				onChangeSuper();
			}, 100);
		});
	};

	/////////////////////
	// Confirm Delete. //
	/////////////////////
	var confirmDelete = function(data) {
		var $this = $(this);
		$this.showConfirm({
			escapeToClose: true,
			title: 'Confirm Delete?',
			message: 'Please confirm to delete the following user.',
			details: '&raquo; ' + ScmsUtils.escapeHTML(data.username) + ' - ' + ScmsUtils.escapeHTML(data.name),
			confirmCallback: function() {
				$this.sendRequest({
					url: ajaxURLPrefix + '/delete/' + data.id,
					type: 'GET',
					loadingIndicator: $loadingIndicator
				}, {
					200: function(data) {
						location.reload(true);
					},
					204: function() {
						showRecordNotFound($(this), data.id);
					}
				});
			}
		});
	};

	////////////////////////////////
	// Form Definitions (Options) //
	////////////////////////////////
	var buildFormOptions = {
		debug: false,
		hideHelpText: false
	};

	////////////////////////////
	// Form Definitions (Add) //
	////////////////////////////
	var buildFormInputsAdd = [{
		type: 'textbox',
		attrs: {
			name: 'username',
			label: 'Username *',
			helpText: 'Minimum 5 characters, only letters, digits, underscores, dashes and dots allowed. Will be stored as lower case.'
		}
	}, {
		type: 'password',
		attrs: {
			name: 'password',
			label: 'Password *',
			helpText: 'Minimum 8 characters (excluding spaces), no spaces allowed within the password.'
		}
	}, {
		type: 'password',
		attrs: {
			name: 'passwordCfm',
			label: 'Confirm Password *',
			helpText: ''
		}
	}, {
		type: 'textbox',
		attrs: {
			name: 'name',
			placeholder: '',
			label: 'Name *',
			helpText: ''
		}
	}, {
		type: 'textbox',
		attrs: {
			name: 'mobileNo',
			placeholder: '',
			label: 'Mobile No.',
			helpText: 'Must be a valid Singapore registered Mobile No.'
		}
	}, {
		type: 'textbox',
		attrs: {
			name: 'email',
			placeholder: '',
			label: 'Email',
			helpText: ''
		}
	}, /*{
		type: 'textbox',
		attrs: {
			name: 'gcEmail',
			placeholder: 'Google Calendar Email',
			label: 'GC Email',
			helpText: ''
		}
	}, {
		type: 'select',
		attrs: {
			name: 'role',
			label: 'Role',
			helpText: '',
			options: [{
				value: 'ClinicAssistant',
				label: 'Clinic Assistant'
			}, {
				value: 'ClinicManager',
				label: 'Clinic Manager'
			}, {
				value: 'Accountant',
				label: 'Accountant'
			}, {
				value: 'Doctor',
				label: 'Doctor'
			}, {
				value: 'SysOps',
				label: 'SysOps'
			}]
		}
	},*/ {
		type: 'singleCheckbox',
		attrs: {
			name: 'isDoctor',
			label: doctorLabel,
			helpText: ''
		}
	}, {
		type: 'colorpicker',
		attrs: {
			name: 'color',
			label: 'Color',
			helpText: '',
			options: scmsColors
		}
	}, {
		type: 'textbox',
		attrs: {
			name: 'mcrNo',
			placeholder: '',
			label: mcrNoLabel,
			helpText: mcrNoHelpText
		}
	}, {
		type: 'select',
		attrs: {
			name: 'badgeRule',
			label: 'Badge Preference',
			helpText: '',
			options: [{
				value: '1',
				label: 'Show if tasks haven\'t finished after reminder date'
			}, {
				value: '2',
				label: 'Show if have overdue tasks'
			}]
		}
	}, {
		type: 'buttonGroup',
		attrs: {
			name: 'superAdmin',
			label: 'Super Admin',
			helpText: '',
			values: [{
				value: 'Yes',
				label: 'Yes'
			}, {
				value: 'No',
				label: 'No'
			}]
		}
	}/*, {
		type: 'checkbox',
		attrs: {
			name: 'sites',
			label: 'Accessible Sites',
			prefix: 'site',
			helpText: '',
			list: siteList
		}
	}*/];
	var buildFormButtonsAdd = [{
		name: 'btn_cancel',
		label: 'Cancel',
		type: 'default',
		size: 'sm',
		onClick: function() {
			$btnAdd.prop('disabled', false);
			$infoDiv.show().siblings().hide();
			if (dataTableNoResults) {
				$rightPanel.hide();
			}
		}
	}, {
		name: 'btn_submit',
		label: 'Add',
		type: 'primary',
		size: 'sm',
		onClick: function() {
			var $this = $(this);
			$this.prop('disabled', true);
			$(this).sendRequest({
				url: ajaxURLPrefix + '/add',
				data: $formDiv.serialize(),
				type: 'POST',
				loadingIndicator: $loadingIndicator
			}, {
				200: function(data) {
					location.reload(true);
				},
				400: function(data) {
					if (data && data.hasOwnProperty('responseJSON') && data.responseJSON.length > 0) {
						$.each(data.responseJSON, function(i, e) {
							let label = $formDiv.find('label[for="' + e.k + '"]').text().replace(' *', '');
							let input = $formDiv.find('[name="' + e.k + '"]');
							input.parent().addClass('has-error');
							input.siblings('span.error').html('<i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;' + label + ' ' + e.v);
						});
					}
					$this.prop('disabled', false);
				},
			});
		}
	}];

	///////////////////////////////
	// Form Definitions (Passwd) //
	///////////////////////////////
	var buildFormInputsPasswd = [{
		type: 'hidden',
		attrs: {
			values: [{
				name: 'id',
				value: ''
			}]
		}
	}, {
		type: 'readonlyText',
		attrs: {
			name: 'username',
			label: 'Username',
			helpText: ''
		}
	}, {
		type: 'readonlyText',
		attrs: {
			name: 'name',
			placeholder: '',
			label: 'Name',
			helpText: ''
		}
	}, {
		type: 'password',
		attrs: {
			name: 'passwordNew',
			label: 'New Password *',
			helpText: 'Minimum 8 characters (excluding spaces), no spaces allowed within the password.'
		}
	}, {
		type: 'password',
		attrs: {
			name: 'passwordCfm',
			label: 'Confirm Password *',
			helpText: ''
		}
	}];
	var buildFormButtonsPasswd = [{
		name: 'btn_cancel',
		label: 'Cancel',
		type: 'default',
		size: 'sm',
		onClick: function() {
			$btnAdd.prop('disabled', false);
			$infoDiv.show().siblings().hide();
			if (dataTableNoResults) {
				$rightPanel.hide();
			}
		}
	}, {
		name: 'btn_submit',
		label: 'Update',
		type: 'primary',
		size: 'sm',
		onClick: function() {
			var $this = $(this);
			$this.prop('disabled', true);
			$(this).sendRequest({
				url: ajaxURLPrefix + '/change-password',
				data: $formDiv.serialize(),
				type: 'POST',
				loadingIndicator: $loadingIndicator
			}, {
				200: function(data) {
					location.reload(true);
				},
				400: function(data) {
					if (data && data.hasOwnProperty('responseJSON') && data.responseJSON.length > 0) {
						$.each(data.responseJSON, function(i, e) {
							let label = $formDiv.find('label[for="' + e.k + '"]').text().replace(' *', '');
							let input = $formDiv.find('[name="' + e.k + '"]');
							input.parent().addClass('has-error');
							input.siblings('span.error').html('<i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;' + label + ' ' + e.v);
						});
					}
					$this.prop('disabled', false);
				},
			});
		}
	}];

	/////////////////////////////
	// Form Definitions (Edit) //
	/////////////////////////////
	var buildFormInputsEdit = [{
		type: 'hidden',
		attrs: {
			values: [{
				name: 'id',
				value: ''
			}]
		}
	}, {
		type: 'readonlyText',
		attrs: {
			name: 'username',
			label: 'Username *',
			helpText: ''
		}
	}, {
		type: 'textbox',
		attrs: {
			name: 'name',
			placeholder: '',
			label: 'Name *',
			helpText: ''
		}
	}, {
		type: 'textbox',
		attrs: {
			name: 'mobileNo',
			placeholder: '',
			label: 'Mobile No.',
			helpText: 'Must be a valid Singapore registered Mobile No.'
		}
	}, {
		type: 'textbox',
		attrs: {
			name: 'email',
			placeholder: '',
			label: 'Email',
			helpText: ''
		}
	}, /*{
		type: 'textbox',
		attrs: {
			name: 'gcEmail',
			placeholder: 'Google Calendar Email',
			label: 'GC Email',
			helpText: ''
		}
	}, {
		type: 'select',
		attrs: {
			name: 'role',
			label: 'Role',
			helpText: '',
			options: [
				{
					value: 'ClinicAssistant',
					label: 'Clinic Assistant'
				},
				{
					value: 'ClinicManager',
					label: 'Clinic Manager'
				},
				{
					value: 'Accountant',
					label: 'Accountant'
				},
				{
					value: 'Doctor',
					label: 'Doctor'
				},
				{
					value: 'SysOps',
					label: 'SysOps'
				}
			]
		}
	},*/ {
		type: 'singleCheckbox',
		attrs: {
			name: 'isDoctor',
			label: doctorLabel,
			helpText: ''
		}
	}, {
		type: 'colorpicker',
		attrs: {
			name: 'color',
			label: 'Color',
			helpText: '',
			options: scmsColors
		}
	}, {
		type: 'textbox',
		attrs: {
			name: 'mcrNo',
			placeholder: '',
			label: mcrNoLabel,
			helpText: mcrNoHelpText
		}
	}, {
		type: 'select',
		attrs: {
			name: 'badgeRule',
			label: 'Badge Preference',
			helpText: '',
			options: [
				{
					value: '1',
					label: 'Show if tasks haven\'t finished after reminder date'
				},
				{
					value: '2',
					label: 'Show if have overdue tasks'
				}
			]
		}
	}, {
		type: 'buttonGroup',
		attrs: {
			name: 'superAdmin',
			label: 'Super Admin',
			helpText: '',
			values: [
				{
					value: 'Yes',
					label: 'Yes'
				},
				{
					value: 'No',
					label: 'No'
				}
			]
		}
	}/*, {
		type: 'checkbox',
		attrs: {
			name: 'sites',
			label: 'Accessible Sites',
			prefix: 'site',
			helpText: '',
			list: siteList
		}
	}*/];
	var buildFormButtonsEdit = [{
		name: 'btn_cancel',
		label: 'Cancel',
		type: 'default',
		size: 'sm',
		onClick: function() {
			$infoDiv.show().siblings().hide();
		}
	}, {
		name: 'btn_submit',
		label: 'Update',
		type: 'primary',
		size: 'sm',
		onClick: function() {
			var $this = $(this);
			$this.prop('disabled', true);
			$(this).sendRequest({
				url: ajaxURLPrefix + '/update',
				data: $formDiv.serialize(),
				type: 'POST',
				loadingIndicator: $loadingIndicator
			}, {
				200: function(data) {
					location.reload(true);
				},
				204: function() {
					showRecordNotFound($(this), $formDiv.find('input[name=id]').val());
				},
				400: function(data) {
					if (data && data.hasOwnProperty('responseJSON') && data.responseJSON.length > 0) {
						$.each(data.responseJSON, function(i, e) {
							let label = $formDiv.find('label[for="' + e.k + '"]').text().replace(' *', '');
							let input = $formDiv.find('[name="' + e.k + '"]');
							input.parent().addClass('has-error');
							input.siblings('span.error').html('<i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;' + label + ' ' + e.v);
						});
					}
					$this.prop('disabled', false);
				},
			});
		}
	}];
});
</script>
  </div>
				<div id="confirm-prompt-div-v2"></div>

<script id="templ-v2-confirm-prompt" type="text/x-handlebars-template">
  <div class="modal fade" tabindex="-1" role="dialog" id="confirm-prompt">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
          <h4 class="modal-title">{{{ title }}}</h4>
        </div>
        <div class="modal-body">
          <p>{{{ body }}}</p>
        </div>
        <div class="modal-footer">
          <span id="confirm-prompt-error" class="text-danger">&nbsp;</span>&nbsp;
          <button type="button" class="btn btn-sm btn-default" id="confirm-prompt-cancel" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-sm btn-primary" id="confirm-prompt-ok">Confirm</button>
        </div>
      </div>
    </div>
  </div>
</script>
		<footer class="footer text-right">
  <div class="container-fluid">
    <p class="text-muted">
      <span class="animated">Â© <a href="http://www.connectedmachines.com/" target="cmpl">Connected Machines Pte Ltd</a></span>
                </p>
  </div>
</footer>
												<script src="./index_files/mousetrap.min.js"></script>
		<script src="./index_files/mousetrap-bind-dictionary.min.js"></script>

				<script src="./index_files/numeral.min.js"></script>

				<script src="./index_files/bootstrap-datepicker.min.js"></script>

				<script src="./index_files/ie10-viewport-bug-workaround.js"></script>

				<script src="./index_files/api.js"></script>


</body></html>
